name: Setup Virtual Container
description: >
  Set up a Linux container to use in workflow steps. Because the container is run inside a virtualized
  Alpine Linux distribution provided by jirutka/setup-alpine, the container can run on a different
  CPU architecture.
author: Sander Vocke

inputs:
  container:
    description: >
      URL of the container to use. It will be started using Podman.
    required: true
    default: null
  arch:
    description: >
      CPU architecture to use.
    default: x86_64

runs:
  using: composite
  steps:
    - name: Install packages
      uses: ConorMacBride/install-package@v1
      with:
        apt: podman qemu qemu-user-static
    - name: Run container
      shell: bash
      run: |
         podman run --arch aarch64 --privileged=true quay.io/pypa/manylinux_2_28_aarch64 uname -m
